<!DOCTYPE html>
<html lang="en">

<head>
    <base href="/" />
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no">
    <meta name="theme-color" content="#000000">
    <meta name="format-detection" content="telephone=no" />
    <title>宏任务与微任务</title>
</head>

<body>
    <script type="text/javascript">
    /**
        js 宏任务和微任务
        https://www.cnblogs.com/wangziye/p/9566454.html
        https://www.cnblogs.com/mmykdbc/p/10401759.html
        JS事件循环机制（event loop）之宏任务、微任务
        https://segmentfault.com/a/1190000014940904
    */
    
    // setTimeout(() => {
    //     console.log('内层宏事件3')
    // }, 0)
    // console.log('外层宏事件1');

    // new Promise((resolve) => {
    //     console.log('外层宏事件2');
    //     resolve()
    // }).then(() => {
    //     console.log('微事件1');
    // }).then(()=>{
    //     console.log('微事件2')
    // })
    // console.log('end')
    // 外层宏事件1
    // 外层宏事件2
    // end
    // 微事件1
    // 微事件2
    // 内层宏事件3


    // ===================================================================

    setTimeout(() => {
        console.log('内层宏事件3')
    }, 0)

    setImme
    console.log('外层宏事件1');

    new Promise((resolve) => {
        console.log('外层宏事件2');
        setTimeout(() => resolve(),0)
    }).then(() => {
        console.log('微事件1');
    }).then(()=>{
        console.log('微事件2')
    })
    console.log('end')
    // 外层宏事件1
    // 外层宏事件2
    // end
    // 内层宏事件3
    // 微事件1
    // 微事件2

    // ===================================================================

// //主线程直接执行
// console.log('1');
// //丢到宏事件队列中
// setTimeout(function() {
//     console.log('2');
   
//     new Promise(function(resolve) {
//         console.log('4');
//         resolve();
//     }).then(function() {
//         console.log('5')
//     })
// })

//主线程直接执行
// new Promise(function(resolve) {
//     console.log('7');
//     resolve();
// }).then(function() {
//     //微事件2
//     console.log('8')
// })
// //丢到宏事件队列中
// setTimeout(function() {
//     console.log('9');
   
//     new Promise(function(resolve) {
//         console.log('11');
//         resolve();
//     }).then(function() {
//         console.log('12')
//     })
// })
 // ===================================================================

    // setTimeout(function() {
    //     console.log(1)
    // }, 0);
    
    // new Promise(function(resolve, reject) {
    //     console.log(2)
    //     for(var i = 0; i < 10000; i++) {
    //         if(i === 800) {
    //             console.log(10)
    //         }
    //         i == 9999 && resolve();
    //     }
    //     console.log(3)
    // }).then(function() {
    //     console.log(4)
    // })

    // setTimeout(function() {
    //     console.log(9);
    //     new Promise(function(resolve) {
    //         console.log(7);
    //         resolve();
    //     }).then(function() {
    //         console.log(8)
    //     })
    // }, 0);
    // console.log(5);

// 猜测结果 2  10  3  4  5 1  9  7 8
// 实际结果 2  10  3  5  4 1  9  7 8
    </script>
</body>

</html>